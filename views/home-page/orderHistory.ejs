<!-- // RMIT University Vietnam
// Course: COSC2430 Web Programming
// Semester: 2023A
// Assessment: Assignment 2
// Author: Do Le Long An,Truong Hong Van,Bui Tuan Anh,Lao Vinh Khang,Pham Le Quynh Anh
// ID: s3963207,s3957034,s3970375,s3891925,s3927427
// Acknowledgement: MDN Web Docs, RMIT Canvas, ChatGPT, NPM Packages' Docs -->


<!-- order-history.ejs -->

<h2 class="text-center">Order History</h2>

  <% if (orderHistory && orderHistory.length) { %>
    <% orderHistory.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).forEach((order, index) => { %>
      <div class="mt-3 bg-white p-3 rounded">
        <h3 class="lh-base">Order <%= index + 1 %></h3>
        <p><span class="fw-light fs-5 pe-5">Status:</span><span class="text-uppercase text-primary"><%= order.orderStatus %></span>
        </p>
        <p><span class="fw-light fs-5 pe-5">Total Price:</span><span class="text-danger fs-5">$<%= order.totalPrice %>
        </span></p>

        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr class="bg-dark text-white">
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
              </tr>
            </thead>
            <tbody>
              <% order.products.forEach((product)=> { %>
              <tr>
                <td>
                  <%= product.name %>
                </td>
                <td>
                  <%= product.price %>
                </td>
                <td>
                  <%= product.quantity %>
                </td>
              </tr>
              <% }) %>
          </tbody>
        </table>
      </div>
    </div>
      <% }) %>
        <% } else { %>
          <p>No order history found.</p>
          <% } %>
